alias: magician; mage; old man; man; to wizard; to magician; to mage; to old man; to man

verb talk:

if (inside of the small house.isDave = true) {
  if (inside of the small house.wizardDidPrank = true) {
    if (inside of the small house.wizardFirstTalk = true) {
      msg ("\"What are you saying?\"<br/><br/>\"You're not going to kill us, are you? Oh, I'm so relieved! Imagine if I could never see Dave's face again!\"")
      wait {
        msg ("<br/>\"That was just a mise-en-scene. You know, just in case the Devil comes by to check if everything is under control.”<br/><br/>\"Actually, I do not help him very often anymore. Ever since he saw Barbie in the cinema, he's been redecorating in Hell, painting every nook and cranny in hot pink and throwing all-day pool parties. It seems that money cannot buy everything. And that makes me sad.”")
        wait {
          msg ("<br/>Loan replies: “My heart goes out to you.”<br/>“Thank you! It’s so hard…”<br/>“I can imagine how it is… It must be hard to survive without money…”")
          wait {
            msg ("<br/>“What? I was talking about never being invited to his pool parties!”<br/><br/>I feel you.<br/><br/>But we’re wasting time. According to Loan, this is supposed to be the trip of our lives.")
            SetObjectFlagOff (inside of the small house, "wizardFirstTalk")
            SetObjectFlagOn (inside of the small house, "wizardSecondTalk")
          }
        }
      }
    }
    else if (inside of the small house.wizardSecondTalk = true) {
      msg ("“Excuse me, but why are we here?\"<br/>\"I wanted to surprise you\", Loan says.<br/><br/>\"I may be able to find a cure for him. But as I told you, you must find the Cloaking Stone.\"<br/><br/>\"The Cloaking Stone?\", I say.<br/><br/>\"Yes, indeed. The most powerful amulet that may cloak the mistakes that life has made.”")
      wait {
        msg ("<br/>This looks interesting. I have a look at Loan and he has a look of concentration too.<br/>He seems to be trying not to open his mouth for fear of saying something embarrassing.<br/><br/>No worries, dear. We are among friends.")
        SetObjectFlagOn (inside of the small house, "letLoanTalk")
      }
      SetObjectFlagOff (inside of the small house, "wizardSecondTalk")
    }
    else if (inside of the small house.wizardThirdTalk = true) {
      msg ("\"So could you tell me and Loan where the entrance is? If you already know, it's a good place to start.\"<br/><br/>\"I can't. I'm forbidden to.\"<br/><br/>\"I can only give you two clues.\"")
      wait {
        msg ("<br/>\"After you have made up your mind, you will choose one of the three doors on the other side of this table. One of them will lead you to the right place.\"")
        SetObjectFlagOff (inside of the small house, "wizardThirdTalk")
        wait {
          msg ("<br/>\"If it brings such power, why didn't you get it before?\"<br/>\"I can't. I'm forbidden to.\"<br/><br/>\"Three doors. The first one says 'Beach', the second 'Mountain'. And the third, 'Desert'.”<br/><br/><br/>\"Look around you.”<br/>\"I have already done so. Even if I did not tell you.\"")
          wait {
            msg ("<br/>\"You did. But not him.\"")
            SetObjectFlagOn (inside of the small house, "loanShouldLookAround")
          }
        }
      }
    }
    else if (inside of the small house.letLoanTalk = true) {
      msg ("Loan might want to tell something.")
    }
    else if (inside of the small house.loanShouldLookAround = true) {
      msg ("Not now.")
    }
  }
  else if (inside of the small house.wizardDidPrank = false) {
    if (inside of the small house.nextToTable = true) {
      msg ("\"What is that giant statue over there?\", I ask him, pointing at it with my index.")
      wait {
        msg ("<br/>\"Oh, that? That is the Ultimate God. This is the true God that has ever existed! I am the servant of the Devil Himself!\"")
        wait {
          msg ("<br/>\"Now be on your feet before I pluck out your eyes!\"<br/><br/>\"Wait, I thought you worked for the good. Is this some kind of online scam?\"<br/><br/>I love Loan's sense of humour.<br/>We're about to get killed and he still manages to make me laugh.<br/><br/>\"If you don't say 'You're the greatest wizard of all time' three times, your life is over.\"<br/><br/>\"But that's Voldemort!\" says Loan.<br/><br/>Shut up! You'll get us into more trouble.<br/><br/>\"I'm talking to you, Dave!\"<br/>\"In 3, 2, 1!\"")
        }
      }
      EnableTimer (wizardPrank)
    }
    else if (inside of the small house.nextToTable = false) {
      msg ("We're not nearby the table.")
    }
  }
  else {
    msg ("Not now.")
  }
}
else if (inside of the small house.isDave = false) {
  if (inside of the small house.LoanFinishedTalking = true) {
    msg ("I give the floor to Dave.")
  }
  else if (inside of the small house.letLoanTalk = true) {
    msg ("“And where do we find it?”<br/>\"The problem is not where, but how.\"")
    wait {
      msg ("<br/>“I know where the entrance to the Street of Old Hells is. The stone is there. You must cross it all the way to the end. It will be waiting for you.”")
      SetObjectFlagOff (inside of the small house, "letLoanTalk")
      SetObjectFlagOn (inside of the small house, "LoanFinishedTalking")
    }
  }
}